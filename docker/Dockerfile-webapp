FROM debian:latest

ENV DB_HOST=127.0.0.1 \
    DB_USER=root \
    DB_PASSWORD=abc123 \
    PORT=443

RUN apt-get -y update
RUN apt-get -y install mysql-client
RUN apt-get -y install redis-server
RUN apt-get -y install nodejs
RUN apt-get -y install git

RUN redis-server --daemonize yes

RUN git clone https://github.com/jsross/ptcoresec-scoreboard-ctf.git /usr/src/scoreboard

COPY ./keys /usr/src/scoreboard/keys

EXPOSE 443
# Set Password?
#RUN mysql -u root --password=abc123 < /usr/src/scoreboard/BD/tournament.sql
#RUN mysql -u root --password=abc123 < /usr/src/scoreboard/BD/salts.sql 